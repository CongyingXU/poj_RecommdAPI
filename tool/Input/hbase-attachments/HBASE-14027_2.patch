From f526241f5ef0471cfb3fd4cc239d1998ea496f4e Mon Sep 17 00:00:00 2001
From: Sean Busbey <busbey@apache.org>
Date: Mon, 6 Jul 2015 17:00:51 -0500
Subject: [PATCH] HBASE-14027 clean up multiple netty jars.

---
 hbase-it/pom.xml     |    6 ++++--
 hbase-server/pom.xml |    2 +-
 pom.xml              |    9 +++++++++
 3 files changed, 14 insertions(+), 3 deletions(-)

diff --git a/hbase-it/pom.xml b/hbase-it/pom.xml
index 30bdf13..3b37108 100644
--- a/hbase-it/pom.xml
+++ b/hbase-it/pom.xml
@@ -251,10 +251,12 @@
       <groupId>org.apache.htrace</groupId>
       <artifactId>htrace-core</artifactId>
     </dependency>
+    <!-- Hadoop needs Netty 3.x at test scope for the minicluster -->
     <dependency>
-      <groupId>org.jboss.netty</groupId>
+      <groupId>io.netty</groupId>
       <artifactId>netty</artifactId>
-      <version>3.2.4.Final</version>
+      <version>${netty.hadoop.version}</version>
+      <scope>test</scope>
     </dependency>
   </dependencies>
 
diff --git a/hbase-server/pom.xml b/hbase-server/pom.xml
index 229d11d..05bd619 100644
--- a/hbase-server/pom.xml
+++ b/hbase-server/pom.xml
@@ -677,7 +677,7 @@
         <dependency>
           <groupId>io.netty</groupId>
           <artifactId>netty</artifactId>
-          <version>3.6.2.Final</version>
+          <version>${netty.hadoop.version}</version>
           <scope>test</scope>
         </dependency>
       </dependencies>
diff --git a/pom.xml b/pom.xml
index 5da039f..569f31f 100644
--- a/pom.xml
+++ b/pom.xml
@@ -1194,6 +1194,7 @@
     <jamon-runtime.version>2.3.1</jamon-runtime.version>
     <jettison.version>1.3.3</jettison.version>
     <netty.version>4.0.23.Final</netty.version>
+    <netty.hadoop.version>3.6.2.Final</netty.hadoop.version>
     <joni.version>2.1.2</joni.version>
     <jcodings.version>1.0.8</jcodings.version>
     <spy.version>2.11.6</spy.version>
@@ -1978,6 +1979,10 @@
                 <artifactId>servlet-api</artifactId>
               </exclusion>
               <exclusion>
+                <groupId>io.netty</groupId>
+                <artifactId>netty</artifactId>
+              </exclusion>
+              <exclusion>
                 <groupId>stax</groupId>
                 <artifactId>stax-api</artifactId>
               </exclusion>
@@ -2000,6 +2005,10 @@
                 <artifactId>servlet-api</artifactId>
               </exclusion>
               <exclusion>
+                <groupId>io.netty</groupId>
+                <artifactId>netty</artifactId>
+              </exclusion>
+              <exclusion>
                 <groupId>stax</groupId>
                 <artifactId>stax-api</artifactId>
               </exclusion>
-- 
1.7.10.2 (Apple Git-33)

