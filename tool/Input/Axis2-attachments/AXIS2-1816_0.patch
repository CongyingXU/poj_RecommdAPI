Index: AdminAgent.java
===================================================================
--- AdminAgent.java	(revision 481780)
+++ AdminAgent.java	(working copy)
@@ -18,6 +18,19 @@
 
 package org.apache.axis2.transport.http;
 
+import java.io.File;
+import java.io.IOException;
+import java.util.ArrayList;
+import java.util.Collection;
+import java.util.HashMap;
+import java.util.Iterator;
+import java.util.List;
+
+import javax.servlet.ServletException;
+import javax.servlet.http.HttpServletRequest;
+import javax.servlet.http.HttpServletResponse;
+import javax.xml.namespace.QName;
+
 import org.apache.axis2.AxisFault;
 import org.apache.axis2.Constants;
 import org.apache.axis2.context.ConfigurationContext;
@@ -27,21 +40,15 @@
 import org.apache.axis2.description.AxisService;
 import org.apache.axis2.description.Parameter;
 import org.apache.axis2.engine.AxisConfiguration;
-import org.apache.commons.fileupload.DiskFileUpload;
 import org.apache.commons.fileupload.FileItem;
-import org.apache.commons.fileupload.FileUpload;
+import org.apache.commons.fileupload.FileItemFactory;
+import org.apache.commons.fileupload.RequestContext;
+import org.apache.commons.fileupload.disk.DiskFileItemFactory;
+import org.apache.commons.fileupload.servlet.ServletFileUpload;
+import org.apache.commons.fileupload.servlet.ServletRequestContext;
 import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
 
-import javax.servlet.ServletException;
-import javax.servlet.http.HttpServletRequest;
-import javax.servlet.http.HttpServletResponse;
-import javax.xml.namespace.QName;
-import java.io.File;
-import java.io.IOException;
-import java.io.OutputStream;
-import java.util.*;
-
 /**
  * Provides methods to process axis2 admin requests.
  */
@@ -120,13 +127,21 @@
     	req.setAttribute("hotDeployment", (hasHotDeployment.equals("true")) ? "enabled"
     			: "disabled");
     	req.setAttribute("hotUpdate", (hasHotUpdate.equals("true")) ? "enabled" : "disabled");
-    	boolean isMultipart = FileUpload.isMultipartContent(req);
+    	
+    	RequestContext reqContext = new ServletRequestContext(req);
+
+    	boolean isMultipart = ServletFileUpload.isMultipartContent(reqContext);
+    	
     	if (isMultipart) {
 
     		try {
-    			// Create a new file upload handler
-    			DiskFileUpload upload = new DiskFileUpload();
-
+    			//Create a factory for disk-based file items
+    			FileItemFactory factory = new DiskFileItemFactory();
+    			
+    			//Create a new file upload handler
+    			ServletFileUpload upload = new ServletFileUpload(factory);
+    			
+    			//Parse the request
     			List items = upload.parseRequest(req);
 
     			// Process the uploaded items
