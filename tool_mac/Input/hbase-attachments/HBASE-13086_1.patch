From 8ebb7856fc4a9860487454525a75f4666447f5fc Mon Sep 17 00:00:00 2001
From: Nick Dimiduk <ndimiduk@apache.org>
Date: Mon, 23 Feb 2015 13:57:11 -0800
Subject: [PATCH] HBASE-13068 Show ZK root node on Master WebUI

---
 .../java/org/apache/hadoop/hbase/zookeeper/ZooKeeperWatcher.java   | 7 +++++++
 .../org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.jamon     | 5 +++++
 2 files changed, 12 insertions(+)

diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZooKeeperWatcher.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZooKeeperWatcher.java
index 575dcdf..b428d98 100644
--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZooKeeperWatcher.java
+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/zookeeper/ZooKeeperWatcher.java
@@ -371,6 +371,13 @@ public class ZooKeeperWatcher implements Watcher, Abortable, Closeable {
   }
 
   /**
+   * @return the base znode of this zookeeper connection instance.
+   */
+  public String getBaseZNode() {
+    return baseZNode;
+  }
+
+  /**
    * Method called from ZooKeeper for events and connection status.
    * <p>
    * Valid events are passed along to listeners.  Connection status changes
diff --git a/hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.jamon b/hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.jamon
index c83f295..ceda843 100644
--- a/hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.jamon
+++ b/hbase-server/src/main/jamon/org/apache/hadoop/hbase/tmpl/master/MasterStatusTmpl.jamon
@@ -255,6 +255,11 @@ AssignmentManager assignmentManager = master.getAssignmentManager();
                     <td>Addresses of all registered ZK servers. For more, see <a href="/zk.jsp">zk dump</a>.</td>
                 </tr>
                 <tr>
+                    <td>Zookeeper Base Path</td>
+                    <td> <% master.getZooKeeper().getBaseZNode() %></td>
+                    <td>Root node of this cluster in ZK.</td>
+                </tr>
+                <tr>
                     <td>HBase Root Directory</td>
                     <td><% FSUtils.getRootDir(master.getConfiguration()).toString() %></td>
                     <td>Location of HBase home directory</td>
-- 
1.9.3 (Apple Git-50)

