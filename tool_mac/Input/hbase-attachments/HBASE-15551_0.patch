From a53ae4d345ea057d5dfaca2ce3ae980ee102d8b5 Mon Sep 17 00:00:00 2001
From: Mikhail Antonov <antonov@apache.org>
Date: Thu, 28 Apr 2016 15:25:13 -0700
Subject: [PATCH] HBASE-15551 Make call queue too big exception use servername

---
 hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java b/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java
index 286d1dd..d1f686d 100644
--- a/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java
+++ b/hbase-server/src/main/java/org/apache/hadoop/hbase/ipc/RpcServer.java
@@ -1865,7 +1865,7 @@ public class RpcServer implements RpcServerInterface, ConfigurationObserver {
         metrics.exception(CALL_QUEUE_TOO_BIG_EXCEPTION);
         InetSocketAddress address = getListenerAddress();
         setupResponse(responseBuffer, callTooBig, CALL_QUEUE_TOO_BIG_EXCEPTION,
-            "Call queue is full on " + (address != null ? address : "(channel closed)") +
+            "Call queue is full on " + server.getServerName() +
                 ", is hbase.ipc.server.max.callqueue.size too small?");
         responder.doRespond(callTooBig);
         return;
@@ -1931,7 +1931,7 @@ public class RpcServer implements RpcServerInterface, ConfigurationObserver {
         metrics.exception(CALL_QUEUE_TOO_BIG_EXCEPTION);
         InetSocketAddress address = getListenerAddress();
         setupResponse(responseBuffer, call, CALL_QUEUE_TOO_BIG_EXCEPTION,
-            "Call queue is full on " + (address != null ? address : "(channel closed)") +
+            "Call queue is full on " + server.getServerName() +
                 ", too many items queued ?");
         responder.doRespond(call);
       }
-- 
2.8.0-rc2

