From 8de5a0c88ebeff146faf6695cf4d95264f7b35e3 Mon Sep 17 00:00:00 2001
From: Jurriaan Mous <jurmous@jurmo.us>
Date: Sat, 7 May 2016 14:40:51 +0200
Subject: [PATCH] HBASE-15794

---
 .../java/org/apache/hadoop/hbase/client/MultiServerCallable.java     | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

diff --git a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MultiServerCallable.java b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MultiServerCallable.java
index f78f348..e764ceb 100644
--- a/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MultiServerCallable.java
+++ b/hbase-client/src/main/java/org/apache/hadoop/hbase/client/MultiServerCallable.java
@@ -137,9 +137,8 @@ class MultiServerCallable<R> extends PayloadCarryingServerCallable<MultiResponse
   private boolean isCellBlock() {
     // This is not exact -- the configuration could have changed on us after connection was set up
     // but it will do for now.
-    HConnection connection = getConnection();
-    if (!(connection instanceof ClusterConnection)) return true; // Default is to do cellblocks.
-    return ((ClusterConnection) connection).hasCellBlockSupport();
+    ClusterConnection conn = getConnection();
+    return conn.hasCellBlockSupport();
   }
 
   @Override
-- 
2.6.4 (Apple Git-63)

