From 65c6cb5b89ec608d19811eb2e42be411b242f88b Mon Sep 17 00:00:00 2001
From: Huaxiang Sun <hsun@cloudera.com>
Date: Tue, 9 May 2017 15:19:07 -0700
Subject: HBASE-18021, add more info in timed out RetriesExhaustedException for read replica client get processing

---
 .../apache/hadoop/hbase/client/RpcRetryingCallerWithReadReplicas.java | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

diff --git hbase-client/src/main/java/org/apache/hadoop/hbase/client/RpcRetryingCallerWithReadReplicas.java hbase-client/src/main/java/org/apache/hadoop/hbase/client/RpcRetryingCallerWithReadReplicas.java
index 0050269..3a706e7 100644
--- hbase-client/src/main/java/org/apache/hadoop/hbase/client/RpcRetryingCallerWithReadReplicas.java
+++ hbase-client/src/main/java/org/apache/hadoop/hbase/client/RpcRetryingCallerWithReadReplicas.java
@@ -209,7 +209,9 @@ public class RpcRetryingCallerWithReadReplicas {
       Future<Result> f = cs.pollForFirstSuccessfullyCompletedTask(operationTimeout,
           TimeUnit.MILLISECONDS, startIndex, endIndex);
       if (f == null) {
-        throw new RetriesExhaustedException("timed out after " + operationTimeout + " ms");
+        throw new RetriesExhaustedException("Timed out after " + operationTimeout +
+            "ms. Get is sent to replicas with startIndex: " + startIndex + 
+            ", endIndex: " + endIndex + ", Locations: " + rl);
       }
       return f.get();
     } catch (ExecutionException e) {
-- 
2.5.2

