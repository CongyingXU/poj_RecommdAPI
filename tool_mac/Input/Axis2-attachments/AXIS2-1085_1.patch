Index: D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/http/HTTPTransportUtils.java
===================================================================
--- D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/http/HTTPTransportUtils.java	(revision 437412)
+++ D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/http/HTTPTransportUtils.java	(working copy)
@@ -208,7 +208,8 @@
                         // it is SOAP 1.2
                         builder =
                                 new StAXSOAPModelBuilder(xmlreader,
-                                        SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI);
+                                        SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI,
+                                        msgContext);
                         envelope = (SOAPEnvelope) builder.getDocumentElement();
                     } else if (contentType.indexOf(SOAP11Constants.SOAP_11_CONTENT_TYPE) > -1) {
                         soap11 = true;
@@ -228,14 +229,15 @@
 
                                 SOAPFactory soapFactory = new SOAP11Factory();
 
-                                builder = new StAXOMBuilder(xmlreader);
+                                builder = new StAXOMBuilder(xmlreader, msgContext);
                                 builder.setOMBuilderFactory(soapFactory);
                                 envelope = soapFactory.getDefaultEnvelope();
                                 envelope.getBody().addChild(builder.getDocumentElement());
                             }
                         } else {
                             builder = new StAXSOAPModelBuilder(
-                                    xmlreader, SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI);
+                                    xmlreader, SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI,
+                                    msgContext);
                             envelope = (SOAPEnvelope) builder.getDocumentElement();
                         }
                     }
Index: D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/njms/JMSUtils.java
===================================================================
--- D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/njms/JMSUtils.java	(revision 437412)
+++ D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/njms/JMSUtils.java	(working copy)
@@ -331,12 +331,14 @@
                 if (contentType.indexOf(SOAP12Constants.SOAP_12_CONTENT_TYPE) > -1) {
                     // it is SOAP 1.2
                     builder = new StAXSOAPModelBuilder(xmlreader,
-                                                       SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI);
+                                                       SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI,
+                                                       msgContext);
                     envelope = (SOAPEnvelope) builder.getDocumentElement();
                 } else if (contentType.indexOf(SOAP11Constants.SOAP_11_CONTENT_TYPE) > -1) {
                     // SOAP 1.1
                     builder =  new StAXSOAPModelBuilder(xmlreader,
-                                                        SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI);
+                                                        SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI,
+                                                        msgContext);
                     envelope = (SOAPEnvelope) builder.getDocumentElement();
                 }
             }
Index: D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/jms/SimpleJMSWorker.java
===================================================================
--- D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/jms/SimpleJMSWorker.java	(revision 437412)
+++ D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/jms/SimpleJMSWorker.java	(working copy)
@@ -117,13 +117,15 @@
                         // it is SOAP 1.2
                         builder =
                                 new StAXSOAPModelBuilder(xmlreader,
-                                        SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI);
+                                        SOAP12Constants.SOAP_ENVELOPE_NAMESPACE_URI,
+                                        msgContext);
                         envelope = (SOAPEnvelope) builder.getDocumentElement();
                     } else if (contentType.indexOf(SOAP11Constants.SOAP_11_CONTENT_TYPE) > -1) {
                         soap11 = true;
                         builder =
                                 new StAXSOAPModelBuilder(xmlreader,
-                                        SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI);
+                                        SOAP11Constants.SOAP_ENVELOPE_NAMESPACE_URI,
+                                        msgContext);
                         envelope = (SOAPEnvelope) builder.getDocumentElement();
                     }
                 }
Index: D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/TransportUtils.java
===================================================================
--- D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/TransportUtils.java	(revision 437412)
+++ D:/soc/workspaces/axis2/axis2-FilterIntegration-constructor-based/modules/kernel/src/org/apache/axis2/transport/TransportUtils.java	(working copy)
@@ -110,13 +110,13 @@
                 // We now have the message inside an envolope. However, this is 
                 // only an OM; We need to build a SOAP model from it.
 
-                builder = new StAXSOAPModelBuilder(envelope.getXMLStreamReader(), soapNamespaceURI);
+                builder = new StAXSOAPModelBuilder(envelope.getXMLStreamReader(), soapNamespaceURI, msgContext);
                 envelope = (SOAPEnvelope) builder.getDocumentElement();
             } else {
                 XMLStreamReader xmlreader =
                         StAXUtils.createXMLStreamReader(inStream, charSetEnc);
 
-                builder = new StAXSOAPModelBuilder(xmlreader, soapNamespaceURI);
+                builder = new StAXSOAPModelBuilder(xmlreader, soapNamespaceURI, msgContext);
                 envelope = (SOAPEnvelope) builder.getDocumentElement();
             }
 
@@ -236,11 +236,12 @@
             /*
             * Creates the MTOM specific MTOMStAXSOAPModelBuilder
             */             
-            builder = new MTOMStAXSOAPModelBuilder(streamReader, attachments, soapEnvelopeNamespaceURI);
+            builder = new MTOMStAXSOAPModelBuilder(streamReader, attachments, soapEnvelopeNamespaceURI, msgContext);
         	 
         } else if (attachments.getAttachmentSpecType().equals(MTOMConstants.SWA_TYPE)& null!=soapEnvelopeNamespaceURI) {
             builder = new StAXSOAPModelBuilder(streamReader,
-                    soapEnvelopeNamespaceURI);
+                    soapEnvelopeNamespaceURI,
+                    msgContext);
         }
 
         return builder;
