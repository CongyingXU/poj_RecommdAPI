diff --git hbase-it/pom.xml hbase-it/pom.xml
index 70d13ad..0a71de0 100644
--- hbase-it/pom.xml
+++ hbase-it/pom.xml
@@ -174,7 +174,7 @@
             <!-- TODO: failsafe does timeout, but verify does not fail the build because of the timeout.
                  I believe it is a failsafe bug, we may consider using surefire -->
             <forkedProcessTimeoutInSeconds>1800</forkedProcessTimeoutInSeconds>
-            <argLine>-enableassertions -Xmx${failsafe.Xmx} -XX:MaxPermSize=368m
+            <argLine>-enableassertions -Xmx${failsafe.Xmx} ${maxpermsize}
                 -Djava.security.egd=file:/dev/./urandom -XX:+CMSClassUnloadingEnabled
                 -verbose:gc -XX:+PrintCommandLineFlags  -XX:+PrintFlagsFinal</argLine>
           </configuration>
diff --git hbase-spark/pom.xml hbase-spark/pom.xml
index aa03854..99f01ed 100644
--- hbase-spark/pom.xml
+++ hbase-spark/pom.xml
@@ -631,7 +631,7 @@
                         <configuration>
                             <tagsToExclude>Integration-Test</tagsToExclude>
                             <argLine>
-                                -Xmx1536m -XX:MaxPermSize=512m -XX:ReservedCodeCacheSize=512m
+                                -Xmx1536m ${maxpermsize} -XX:ReservedCodeCacheSize=512m
                             </argLine>
                             <parallel>false</parallel>
                         </configuration>
diff --git pom.xml pom.xml
index b26c015..9eabcd3 100644
--- pom.xml
+++ pom.xml
@@ -1256,10 +1256,10 @@
     <!--Mark our test runs with '-Dhbase.build.id' so we can identify a surefire test as ours in a process listing
      -->
     <hbase-surefire.argLine>-enableassertions -Dhbase.build.id=${build.id} -Xmx${surefire.Xmx}
-      -XX:MaxPermSize=256m -Djava.security.egd=file:/dev/./urandom -Djava.net.preferIPv4Stack=true
+      ${maxpermsize} -Djava.security.egd=file:/dev/./urandom -Djava.net.preferIPv4Stack=true
       -Djava.awt.headless=true
     </hbase-surefire.argLine>
-    <hbase-surefire.cygwin-argLine>-enableassertions -Xmx${surefire.cygwinXmx} -XX:MaxPermSize=256m
+    <hbase-surefire.cygwin-argLine>-enableassertions -Xmx${surefire.cygwinXmx} ${maxpermsize}
       -Djava.security.egd=file:/dev/./urandom -Djava.net.preferIPv4Stack=true
       "-Djava.library.path=${hadoop.library.path};${java.library.path}"
     </hbase-surefire.cygwin-argLine>
@@ -1861,6 +1861,28 @@
         </pluginManagement>
       </build>
     </profile>
+
+    <!--In JDK 1.8 and newer the PermGem has been removed. -->
+    <!--These two profiles are to handle the differences between the before and after 1.8 -->
+    <profile>
+      <id>old-jdk</id>
+      <activation>
+        <jdk>(,1.8)</jdk>
+      </activation>
+      <properties>
+        <maxpermsize>-XX:MaxPermSize=512m</maxpermsize>
+      </properties>
+    </profile>
+    <profile>
+      <id>new-jdk</id>
+      <activation>
+        <jdk>[1.8,)</jdk>
+      </activation>
+      <properties>
+        <maxpermsize></maxpermsize>
+      </properties>
+    </profile>
+
     <!-- profile activated by the Jenkins patch testing job -->
     <profile>
       <id>jenkins.patch</id>
