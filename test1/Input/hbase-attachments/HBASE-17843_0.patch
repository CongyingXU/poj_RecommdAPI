From 44db11e7c9b56b891a30b15c01c7f91d9179f5cb Mon Sep 17 00:00:00 2001
From: QilinCao <cao.qilin@zte.com.cn>
Date: Tue, 28 Mar 2017 14:17:36 +0800
Subject: [PATCH] JUnit test timed out in TestRegionReplicaFailover.java

---
 .../apache/hadoop/hbase/regionserver/TestRegionReplicaFailover.java    | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionReplicaFailover.java b/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionReplicaFailover.java
index 69b7581..0ad2520 100644
--- a/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionReplicaFailover.java
+++ b/hbase-server/src/test/java/org/apache/hadoop/hbase/regionserver/TestRegionReplicaFailover.java
@@ -169,7 +169,7 @@ public class TestRegionReplicaFailover {
   /**
    * Tests the case where killing a primary region with unflushed data recovers
    */
-  @Test (timeout = 120000)
+  @Test (timeout = 240000)
   public void testPrimaryRegionKill() throws Exception {
     try (Connection connection = ConnectionFactory.createConnection(HTU.getConfiguration());
         Table table = connection.getTable(htd.getTableName())) {
@@ -195,6 +195,7 @@ public class TestRegionReplicaFailover {
         }
       }
       assertTrue(aborted);
+      Threads.sleep(5000);
 
       // wal replication is async, we have to wait until the replication catches up, or we timeout
       verifyNumericRowsWithTimeout(table, fam, 0, 1000, 0, 30000);
-- 
1.9.1

